<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Farm Smart</title>
<link href="bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="bootstrap-3.3.5/css/bootstrap.theme.min.css" rel="stylesheet" type="text/css">
<link href="bootstrap-3.3.5/css/custom.css" rel="stylesheet" type="text/css">
<script src="javascript/Chart.min.js"></script>
<script src="https://requirejs.org/docs/release/2.1.1/minified/require.js"/>
<script src="javascript/getClimateDataFromAercloud.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>


</style>

</head>

<body>


<nav id="navbar" class="navbar navbar-default navbar-inverse navbr-fixed-top" role="navigation">
<!-- Brand and toggle get grouped for better mobile display -->

	<div class="navbar-header">
		<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
			<span class="sr-only">Toggle nav </span>
			<span class="icon-bar"> </span>
			<span class="icon-bar"> </span>
			<span class="icon-bar"> </span>
		</button>
		<a class="navbar-brand" href="home.html"> FarmSmart </a>
	</div>
	<!-- Nav bar -->
	<div class="collapse navbar-collapse" id="navbarCollapse">
		<ul class="nav navbar-nav">
			<li><a href="home.html"><span class="glyphicon glyphicon-home"></span> Home </a></li>
		</ul>
		
		
	</div>

</nav>
<!-- container of the page to display information -->
<div class="container">

<div class= "panel">
	<h1 class ="panel panel-primary">
		Farm Smart
	</h1>
</div>

<!-- display the dropdown button -->

<div class="dropdown">

<form class="form-inline" role="form">
  <div class="form-group">
    <label for="email">Please select: </label>
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Fertilizer
	<span class="caret"></span></button>
		<ul class="dropdown-menu">
			<li><a href="#">Factor A</a></li>
			<li><a href="#">Factor B</a></li>
			<li><a href="#">Factor C</a></li>
		</ul>
  </div>
</form>
</div>

<!-- display the graph of our project -->
<canvas id="canvas"></canvas>
</div>

</body>

<script type="text/javascript">
	var creationTime = [];
	var temperature = [];
	var humidity = [];
	$.getJSON("https://api.aercloud.aeris.com/v1/16074/scls/ClimateDevice/containers/FirstContainer/contentInstances?apiKey=4ebc440a-eafb-11e5-a218-497c8286085a", function(data) {
    console.log(data);
    $("#json").html(data);
	                //Prepare the Data array with JSON elements with Temperature, Humidity and CreateTime data      
                    for (var key in data.contentInstances){
                        jsonObject = JSON.parse(data.contentInstances[key].content.contentTypeBinary);
                        jsonObject["creationTime"] = new Date(data.contentInstances[key].creationTime).toLocaleString();
						creationTime.push(jsonObject["creationTime"]);
						temperature.push(parseInt(jsonObject["Temperature"]));
						humidity.push(parseInt(jsonObject["Humidity"]));
						
						}
	console.log(creationTime, temperature, humidity);
});

    var lineChartData = {
	//labels = time
    labels : temperature,
    datasets: [{
        fillColor: "rgba(220,220,220,0)",
        strokeColor: "rgba(220,180,0,1)",
        pointColor: "rgba(220,180,0,1)",
		//temperature
        data : temperature
    }, {
        fillColor: "rgba(151,187,205,0)",
        strokeColor: "rgba(151,187,205,1)",
        pointColor: "rgba(151,187,205,1)",
		//moisture
        data : humidity
    }]

}

Chart.defaults.global.animationSteps = 50;
Chart.defaults.global.tooltipYPadding = 16;
Chart.defaults.global.tooltipCornerRadius = 0;
Chart.defaults.global.tooltipTitleFontStyle = "normal";
Chart.defaults.global.tooltipFillColor = "rgba(0,160,0,0.8)";
Chart.defaults.global.animationEasing = "easeOutBounce";
Chart.defaults.global.responsive = true;
Chart.defaults.global.scaleLineColor = "black";
Chart.defaults.global.scaleFontSize = 16;

var ctx = document.getElementById("canvas").getContext("2d");
var LineChartDemo = new Chart(ctx).Line(lineChartData, {
    pointDotRadius: 10,
    bezierCurve: false,
    scaleShowVerticalLines: false,
    scaleGridLineColor: "black"
});
</script>
</html>




	